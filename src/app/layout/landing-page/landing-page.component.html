<div class="main-wrapper">
  <div class="">
    <div class="row align-items-center">
      <div class="col-12">`
        <div class="heading-row">
          <h3>Landing Page</h3>
        </div>
      </div>
    </div>
    <div class="shadow-box mt-0">
      <div class="row align-items-center">
        <form [formGroup]="form" class="row align-items-end">

          <!-- Domain -->
          <div class="col-md-3 position-relative dp-down">
            <label class="form-label">Select Domain</label>
            <!-- <input type="text" class="form-control" placeholder="Search domain" [formControl]="domainCtrl"
              (input)="filterDomains()" (click)="toggleDomainDropdown()"> -->
            <input type="text" class="form-control" placeholder="Search domain" [formControl]="domainCtrl"
              (input)="filterDomains()" (click)="toggleDomainDropdown()">


            <!-- Dropdown List -->
            <ul class="list-group position-absolute w-100" *ngIf="showDomainDropdown && filteredDomainList.length > 0"
              style="z-index:1000; max-height:200px; overflow-y:auto;">
              <li class="list-group-item list-group-item-action" [title]="d.domainName"
                *ngFor="let d of filteredDomainList" (click)="selectDomain(d)">
                {{ d.domain }}
              </li>
            </ul>
          </div>


          <div class="col-md-3">
            <label class="form-label">Select Medium</label>
            <select class="form-control" formControlName="medium">
              <option value="" disabled>-- Select Medium --</option>
              <option *ngFor="let m of mediumList" [value]="m">{{ m }}</option>
            </select>
          </div>



          <!-- Campaign -->
          <div class="col-md-3 position-relative dp-down">
            <label class="form-label">Select campaign</label>
            <input type="text" class="form-control" placeholder="Search campaign" [formControl]="campaignCtrl"
              (input)="filterCampaigns()" (click)="toggleDropdown()">

            <!-- Dropdown List -->
            <ul class="list-group position-absolute w-100 group-list"
              *ngIf="showDropdown && filteredCampaignsList.length > 0">
              <li class="list-group-item list-group-item-action" [title]="c.campaignId"
                *ngFor="let c of filteredCampaignsList" (click)="selectCampaign(c)">
                {{ c.campaignId }} - {{ c.campaignName }}
              </li>
            </ul>
          </div>

          <!-- From Date -->
          <div class="col-md-3">
            <label class="form-label">From Date</label>
            <input type="date" class="form-control" formControlName="from">
          </div>

          <!-- To Date -->
          <div class="col-md-3">
            <label class="form-label">To Date</label>
            <input type="date" class="form-control" formControlName="to">
          </div>

          <!-- Search Button -->
          <div class="col-md-3 d-flex gap-2">
            <button type="button" class="btn btn-primary w-50" (click)="search()">
              <i class="bi bi-search"></i> Search
            </button>
            <button type="button" class="btn btn-danger w-50" (click)="resetFilters()">
              <i class="bi bi-arrow-counterclockwise"></i> Reset
            </button>
          </div>
        </form>

      </div>
    </div>

    <div class="shadow-box">
      <div class="table-responsive">
        <div class="container-fluid mt-3">
          <div class="table-responsive">
            <table class="table table-bordered table-striped">
              <thead class="table-dark">
                <tr>
                  <th>S.No.</th>
                  <th>Campaign - Id</th>
                  <th>Campaign Name</th>
                  <th>Bonus - Id</th>
                  <th>Domain</th>
                  <th>Medium</th>
                  <th>Landing Page Domain</th>
                  <th>Created At</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let element of data; let i = index">
                  <td>{{ i + 1 + (pageIndex * pageSize) }}</td>
                  <td class="text-nowrap ellipsis">{{ element?.campaignId?.campaignId }}</td>
                  <td class="text-nowrap">{{ element?.campaignId?.campaignName }}</td>
                  <td class="text-nowrap">{{ element?.bonusId }}</td>
                  <td class="text-nowrap">{{ element?.domain }}</td>
                  <td class="text-nowrap">{{ element?.medium }}</td>
                  <td class="text-nowrap">{{ element?.landingPageName }}</td>
                  <td class="text-nowrap">{{ element?.createdAt | date:'medium' }}</td>
                </tr>
                <tr *ngIf="data.length === 0">
                  <td colspan="7" class="text-center">No data available</td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Pagination -->
         <nav class="d-flex justify-content-between align-items-center">
      <div>
        Showing {{ pageIndex * pageSize + 1 }} -
        {{ (pageIndex + 1) * pageSize > totalRecords ? totalRecords : (pageIndex + 1) * pageSize }}
        of {{ totalRecords }}
      </div>
      <ul class="pagination mb-0">
        <li class="page-item" [class.disabled]="pageIndex == 0">
          <a class="page-link" (click)="changePage(pageIndex - 1)">Previous</a>
        </li>
        <li class="page-item" [class.disabled]="(pageIndex + 1) * pageSize >= totalRecords">
          <a class="page-link" (click)="changePage(pageIndex + 1)">Next</a>
        </li>
      </ul>
    </nav>
  </div>
</div>